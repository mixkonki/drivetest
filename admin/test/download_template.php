<?php
require_once '../../config/config.php';
require_once '../../includes/db_connection.php';
require_once '../includes/admin_auth.php';

// Ορισμός headers για λήψη αρχείου CSV
header('Content-Type: text/csv; charset=utf-8');
header('Content-Disposition: attachment; filename="drivetest_template.csv"');

// Δημιουργία προτύπου CSV
$output = fopen('php://output', 'w');

// Ορισμός κωδικοποίησης UTF-8 με BOM για σωστή αναγνώριση από Excel
fprintf($output, chr(0xEF).chr(0xBB).chr(0xBF));

// Επικεφαλίδες
fputcsv($output, ['Ερώτηση', 'Επεξήγηση', 'Σωστή απάντηση', 'Απάντηση 1', 'Απάντηση 2', 'Απάντηση 3', 'Απάντηση 4'], ';');

// Παραδείγματα
fputcsv($output, [
    'Ποια είναι η πρωτεύουσα της Ελλάδας;', 
    'Η Αθήνα είναι η πρωτεύουσα της Ελλάδας από το 1834.', 
    '1', 
    'Αθήνα', 
    'Θεσσαλονίκη', 
    'Πάτρα', 
    'Ηράκλειο'
], ';');

fputcsv($output, [
    'Ποιο είναι το μέγιστο επιτρεπόμενο όριο ταχύτητας σε κατοικημένες περιοχές;', 
    'Σύμφωνα με τον Κ.Ο.Κ. το μέγιστο επιτρεπόμενο όριο ταχύτητας σε κατοικημένες περιοχές είναι 50 χλμ/ώρα.', 
    '3', 
    '30 χλμ/ώρα', 
    '40 χλμ/ώρα', 
    '50 χλμ/ώρα', 
    '60 χλμ/ώρα'
], ';');

fputcsv($output, [
    'Πότε είναι υποχρεωτική η χρήση ζώνης ασφαλείας;', 
    'Η χρήση ζώνης ασφαλείας είναι υποχρεωτική για όλους τους επιβάτες, τόσο στα μπροστινά όσο και στα πίσω καθίσματα.', 
    '1', 
    'Πάντα για όλους τους επιβάτες', 
    'Μόνο για τον οδηγό και τον συνοδηγό', 
    'Μόνο σε αυτοκινητόδρομους', 
    'Μόνο όταν το όχημα κινείται με ταχύτητα άνω των 30 χλμ/ώρα'
], ';');

fclose($output);
?>